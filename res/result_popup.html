<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #7C4DFF;
            --primary-light: #B39DDB;
            --primary-dark: #4527A0;
            --secondary-color: #FF4081;
            --text-primary: #333333;
            --text-secondary: #666666;
            --bg-light: #FFFFFF;
            --bg-medium: #F5F5F5;
            --bg-dark: rgba(0, 0, 0, 0.7);
            --border-radius: 10px;
            --shadow-soft: 0 4px 12px rgba(0, 0, 0, 0.1);
            --shadow-strong: 0 8px 20px rgba(124, 77, 255, 0.15);
            --transition-normal: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-primary);
            padding: 10px;
            line-height: 1.5;
        }

        .result-container {
            background-color: var(--bg-light);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-strong);
            width: 80%;
            max-width: 480px;
            padding: 15px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .result-header {
            margin-bottom: 12px;
            position: relative;
            z-index: 1;
        }

        .result-header::after {
            content: '';
            position: absolute;
            width: 40px;
            height: 3px;
            background-color: var(--primary-color);
            left: 50%;
            bottom: -6px;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .result-header h1 {
            color: var(--primary-color);
            font-size: 19px;
            font-weight: 700;
            margin-bottom: 3px;
        }

        .result-header h2 {
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 400;
            margin-top: 0;
        }

        .result-main {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px 0;
        }

        .result-type {
            font-size: 26px;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0 15px;
            letter-spacing: 1px;
            text-shadow: 0 2px 6px rgba(124, 77, 255, 0.2);
        }

        .result-image {
            width: 85px;
            height: 85px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 55px;
            filter: drop-shadow(0 4px 10px rgba(124, 77, 255, 0.3));
            transition: var(--transition-normal);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%);
            border-radius: 50%;
            box-shadow: var(--shadow-soft);
        }

        .dimension-bars {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 15px 0;
            background: var(--bg-medium);
            padding: 12px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-soft);
        }

        .dimension-title {
            font-weight: 500;
            color: var(--primary-dark);
            margin-bottom: 6px;
            font-size: 14px;
        }

        .dimension-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .dimension-label {
            aspect-ratio: 1/1;
            font-weight: 700;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: var(--primary-color);
            color: white;
            box-shadow: 0 2px 4px rgba(124, 77, 255, 0.3);
            font-size: 12px;
        }

        .bar-container {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 0 8px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-light), var(--primary-color));
            border-radius: 10px;
            transition: width 1s ease-in-out;
        }

        .percentage {
            font-size: 12px;
            color: var(--text-secondary);
            min-width: 100px;
            text-align: left;
            font-weight: 500;
        }

        .result-description {
            text-align: left;
            margin: 15px 0;
            padding: 12px;
            background-color: var(--bg-medium);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-soft);
            position: relative;
            overflow: hidden;
        }

        .result-description::before {
            content: '"';
            position: absolute;
            top: -20px;
            left: 5px;
            font-size: 70px;
            opacity: 0.1;
            color: var(--primary-color);
            font-family: Georgia, serif;
        }

        .result-description h3 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 6px;
            font-size: 15px;
            position: relative;
            display: inline-block;
        }

        .result-description p {
            color: var(--text-secondary);
            font-size: 13px;
            line-height: 1.4;
        }

        .share-area {
            margin-top: 15px;
            background: linear-gradient(to bottom right, #f7f9ff, #eef1f7);
            padding: 12px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-soft);
        }

        .share-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .share-area h3 {
            color: var(--primary-color);
            font-size: 15px;
            font-weight: 600;
            margin: 0;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .share-button-container {
            position: relative;
            display: inline-block;
        }

        .share-button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition-normal);
            font-size: 15px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }

        .share-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15);
        }

        .share-button-copy {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .share-button-zep {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tooltip {
            position: absolute;
            background-color: var(--primary-dark);
            color: white;
            padding: 5px 8px;
            border-radius: 4px;
            font-size: 11px;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            opacity: 0;
            transition: var(--transition-normal);
            pointer-events: none;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 3px;
            border-style: solid;
            border-color: transparent transparent var(--primary-dark) transparent;
        }

        .share-text-container {
            width: 100%;
            margin: 12px auto 5px auto;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(6px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .share-text-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-align: left;
            margin-bottom: 5px;
        }

        .share-text-area {
            width: 100%;
            height: 75px;
            padding: 8px;
            border-radius: 8px;
            border: 1px solid var(--primary-light);
            background-color: white;
            font-size: 12px;
            resize: none;
            color: var(--text-primary);
            font-family: 'Noto Sans KR', sans-serif;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-word;
            margin: 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: var(--transition-normal);
        }

        .share-text-area:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(124, 77, 255, 0.2);
        }

        .copy-success {
            display: none;
            color: var(--primary-color);
            margin-top: 8px;
            font-size: 13px;
            font-weight: 500;
            animation: fadeIn 0.5s ease;
        }

        .result-footer {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .result-footer button {
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 7px 12px;
            font-size: 12px;
            border-radius: 16px;
            cursor: pointer;
            transition: var(--transition-normal);
            font-weight: 500;
            box-shadow: 0 3px 8px rgba(124, 77, 255, 0.3);
            min-width: 105px;
        }

        .result-footer button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(124, 77, 255, 0.4);
        }

        #retry-test {
            background: linear-gradient(to right, #FF4081, #F50057);
            box-shadow: 0 3px 8px rgba(255, 64, 129, 0.3);
        }

        #retry-test:hover {
            box-shadow: 0 5px 12px rgba(255, 64, 129, 0.4);
        }

        #go-to-lounge {
            background: linear-gradient(to right, #26C6DA, #00ACC1);
            box-shadow: 0 3px 8px rgba(38, 198, 218, 0.3);
        }

        #go-to-lounge:hover {
            box-shadow: 0 5px 12px rgba(38, 198, 218, 0.4);
        }

        @media (max-width: 768px) {
            .result-container {
                width: 90%;
                padding: 12px;
            }
            
            .result-main {
                flex-direction: column;
            }
            
            .result-type {
                margin: 5px 0;
            }
            
            .dimension-bar {
                flex-wrap: wrap;
            }
            
            .percentage {
                width: 100%;
                text-align: center;
                margin-top: 4px;
                min-width: auto;
                font-size: 11px;
            }
            
            .result-footer {
                flex-direction: column;
            }
            
            .result-footer button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="result-container">
        <div class="result-header">
            <h1>MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼</h1>
            <h2>ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì€...</h2>
        </div>
        
        <div class="result-main">
            <div class="result-image" id="mbti-image"></div>
            <div class="result-type" id="mbti-type">ENFP</div>
        </div>
        
        <div class="dimension-bars">
            <div class="dimension-title">ë‚˜ì˜ ì„±í–¥ ë¶„ì„</div>
            <div class="dimension-bar">
                <div class="dimension-label">E</div>
                <div class="bar-container">
                    <div class="bar-fill" id="e-bar" style="width: 70%;"></div>
                </div>
                <div class="dimension-label">I</div>
                <div class="percentage" id="ei-percentage">E 70% / I 30%</div>
            </div>
            
            <div class="dimension-bar">
                <div class="dimension-label">S</div>
                <div class="bar-container">
                    <div class="bar-fill" id="s-bar" style="width: 45%;"></div>
                </div>
                <div class="dimension-label">N</div>
                <div class="percentage" id="sn-percentage">S 45% / N 55%</div>
            </div>
            
            <div class="dimension-bar">
                <div class="dimension-label">T</div>
                <div class="bar-container">
                    <div class="bar-fill" id="t-bar" style="width: 35%;"></div>
                </div>
                <div class="dimension-label">F</div>
                <div class="percentage" id="tf-percentage">T 35% / F 65%</div>
            </div>
            
            <div class="dimension-bar">
                <div class="dimension-label">J</div>
                <div class="bar-container">
                    <div class="bar-fill" id="j-bar" style="width: 20%;"></div>
                </div>
                <div class="dimension-label">P</div>
                <div class="percentage" id="jp-percentage">J 20% / P 80%</div>
            </div>
        </div>
        
        <div class="result-description">
            <h3 id="mbti-nickname">ì—´ì •ì ì¸ í™œë™ê°€ (ENFP)</h3>
            <p id="mbti-description">ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ì„±ê²©ìœ¼ë¡œ, í•­ìƒ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì°¾ê³  ë‹¤ì–‘í•œ ì•„ì´ë””ì–´ë¥¼ ì‹œë„í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ìš”ì‹œí•˜ë©°, ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì˜ ì´í•´í•˜ê³  ê³µê°í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.</p>
        </div>
        
        <div class="share-area">
            <div class="share-header">
                <h3>ê²°ê³¼ ê³µìœ í•˜ê¸°</h3>
                <div class="share-buttons">
                    <div class="share-button-container">
                        <div class="share-button share-button-copy" id="copy-result">
                            <span>ğŸ“‹</span>
                        </div>
                        <div class="tooltip">ê²°ê³¼ ë³µì‚¬í•˜ê¸°</div>
                    </div>
                    <div class="share-button-container">
                        <div class="share-button share-button-zep" id="share-with-zep">
                            <span>Z</span>
                        </div>
                        <div class="tooltip">Zep ëŒ€í™”ì°½ì— ê³µìœ í•˜ê¸°</div>
                    </div>
                </div>
            </div>
            <div id="copy-success" class="copy-success">âœ“ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤</div>
            <div class="share-text-container">
                <p class="share-text-label">ì•„ë˜ í…ìŠ¤íŠ¸ê°€ ë³µì‚¬ë©ë‹ˆë‹¤:</p>
                <textarea id="share-text-area" class="share-text-area" readonly></textarea>
            </div>
        </div>
        
        <div class="result-footer">
            <button id="retry-test">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
            <button id="go-to-lounge">MBTI ë¼ìš´ì§€</button>
            <button id="close-result">ë‹«ê¸°</button>
        </div>
    </div>

    <script>
        let mbtiResult = null;
        let shareText = "";
        
        // MBTI ìœ í˜•ë³„ ì´ëª¨ì§€ ë§¤í•‘
        const mbtiEmojis = {
            "ISTJ": "âš–ï¸",
            "ISFJ": "ğŸ›¡ï¸",
            "INFJ": "ğŸ”®",
            "INTJ": "ğŸ§ ",
            "ISTP": "ğŸ”§",
            "ISFP": "ğŸ¨",
            "INFP": "ğŸ¦„",
            "INTP": "ğŸ”¬",
            "ESTP": "ğŸ„â€â™‚ï¸",
            "ESFP": "ğŸ­",
            "ENFP": "âœ¨",
            "ENTP": "ğŸ’¡",
            "ESTJ": "ğŸ“Š",
            "ESFJ": "ğŸ¤",
            "ENFJ": "ğŸŒŸ",
            "ENTJ": "ğŸ‘‘"
        };
        
        // ì•±ì—ì„œ ìœ„ì ¯ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë©´ ë™ì‘í•˜ëŠ” í•¨ìˆ˜
        window.addEventListener("message", function(e) {
            if (e.data && e.data.mbtiResult) {
                updateResult(e.data.mbtiResult);
            }
        });
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²°ê³¼ ìš”ì²­
        document.addEventListener('DOMContentLoaded', function() {
            // ì•±ì— ê²°ê³¼ ë°ì´í„° ìš”ì²­
            sendMessageToApp({
                type: "REQUEST_MBTI_RESULT"
            });
            
            // ê³µìœ  ë²„íŠ¼ì— íˆ´íŒ ì´ë²¤íŠ¸ ì¶”ê°€
            document.querySelectorAll('.share-button-container').forEach(container => {
                const tooltip = container.querySelector('.tooltip');
                
                container.addEventListener('mouseenter', function() {
                    tooltip.style.opacity = '1';
                });
                
                container.addEventListener('mouseleave', function() {
                    tooltip.style.opacity = '0';
                });
            });
            
            // ê²°ê³¼ ì»¨í…Œì´ë„ˆì— ë‚˜íƒ€ë‚˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
            animateResultContainer();
            
            // í…ŒìŠ¤íŠ¸ìš© ë”ë¯¸ ë°ì´í„° (ì‹¤ì œë¡œëŠ” ì•±ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜´)
            /*
            updateResult({
                mbtiType: "ENFP",
                percentages: {
                    EI: "E 70% / I 30%",
                    SN: "S 45% / N 55%", 
                    TF: "T 35% / F 65%",
                    JP: "J 20% / P 80%"
                }
            });
            */
        });
        
        // ê²°ê³¼ ì»¨í…Œì´ë„ˆ ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜
        function animateResultContainer() {
            const container = document.querySelector('.result-container');
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';
            container.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            
            setTimeout(() => {
                container.style.opacity = '1';
                container.style.transform = 'translateY(0)';
            }, 100);
        }
        
        function updateResult(result) {
            mbtiResult = result;
            const mbtiType = result.mbtiType || "ENFP";
            document.getElementById('mbti-type').textContent = mbtiType;
            
            console.log("ì—…ë°ì´íŠ¸ í•¨ìˆ˜ì—ì„œ ë°›ì€ ê²°ê³¼:", JSON.stringify(result));
            
            // ì´ëª¨ì§€ ì—…ë°ì´íŠ¸
            const imageElement = document.getElementById('mbti-image');
            imageElement.innerHTML = mbtiEmojis[mbtiType] || "âœ¨"; // ê¸°ë³¸ê°’ì€ ENFPì˜ ì´ëª¨ì§€
            
            // ë°±ë¶„ìœ¨ í‘œì‹œ ë° ë°” ì—…ë°ì´íŠ¸
            if (result.percentages) {
                const percentages = result.percentages;
                console.log("ë°›ì€ percentages ë°ì´í„°:", JSON.stringify(percentages));
                
                // ëª¨ë“  ë°” ì´ˆê¸°í™”
                document.querySelectorAll('.bar-fill').forEach(bar => {
                    bar.style.width = '0%';
                });
                
                // ì§€ì—° í›„ ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ë°” ì±„ìš°ê¸°
                setTimeout(() => {
                    // EI ì—…ë°ì´íŠ¸
                    if (percentages.EI) {
                        document.getElementById('ei-percentage').textContent = percentages.EI;
                        
                        // E/I ê°’ ì¶”ì¶œ
                        let eValue = 50;
                        if (percentages.EI.startsWith('E')) {
                            const match = percentages.EI.match(/E\s*(\d+)%/);
                            if (match && match[1]) {
                                eValue = parseInt(match[1]);
                            }
                        } else if (percentages.EI.startsWith('I')) {
                            const match = percentages.EI.match(/I\s*(\d+)%/);
                            if (match && match[1]) {
                                eValue = 100 - parseInt(match[1]);
                            }
                        }
                        
                        document.getElementById('e-bar').style.width = `${eValue}%`;
                        console.log("E/I ë°” ì„¤ì •:", eValue);
                    }
                    
                    setTimeout(() => {
                        // SN ì—…ë°ì´íŠ¸
                        if (percentages.SN) {
                            document.getElementById('sn-percentage').textContent = percentages.SN;
                            
                            // S/N ê°’ ì¶”ì¶œ
                            let sValue = 50;
                            if (percentages.SN.startsWith('S')) {
                                const match = percentages.SN.match(/S\s*(\d+)%/);
                                if (match && match[1]) {
                                    sValue = parseInt(match[1]);
                                }
                            } else if (percentages.SN.startsWith('N')) {
                                const match = percentages.SN.match(/N\s*(\d+)%/);
                                if (match && match[1]) {
                                    sValue = 100 - parseInt(match[1]);
                                }
                            }
                            
                            document.getElementById('s-bar').style.width = `${sValue}%`;
                            console.log("S/N ë°” ì„¤ì •:", sValue);
                        }
                        
                        setTimeout(() => {
                            // TF ì—…ë°ì´íŠ¸
                            if (percentages.TF) {
                                document.getElementById('tf-percentage').textContent = percentages.TF;
                                
                                // T/F ê°’ ì¶”ì¶œ
                                let tValue = 50;
                                if (percentages.TF.startsWith('T')) {
                                    const match = percentages.TF.match(/T\s*(\d+)%/);
                                    if (match && match[1]) {
                                        tValue = parseInt(match[1]);
                                    }
                                } else if (percentages.TF.startsWith('F')) {
                                    const match = percentages.TF.match(/F\s*(\d+)%/);
                                    if (match && match[1]) {
                                        tValue = 100 - parseInt(match[1]);
                                    }
                                }
                                
                                document.getElementById('t-bar').style.width = `${tValue}%`;
                                console.log("T/F ë°” ì„¤ì •:", tValue);
                            }
                            
                            setTimeout(() => {
                                // JP ì—…ë°ì´íŠ¸
                                if (percentages.JP) {
                                    document.getElementById('jp-percentage').textContent = percentages.JP;
                                    
                                    // J/P ê°’ ì¶”ì¶œ
                                    let jValue = 50;
                                    if (percentages.JP.startsWith('J')) {
                                        const match = percentages.JP.match(/J\s*(\d+)%/);
                                        if (match && match[1]) {
                                            jValue = parseInt(match[1]);
                                        }
                                    } else if (percentages.JP.startsWith('P')) {
                                        const match = percentages.JP.match(/P\s*(\d+)%/);
                                        if (match && match[1]) {
                                            jValue = 100 - parseInt(match[1]);
                                        }
                                    }
                                    
                                    document.getElementById('j-bar').style.width = `${jValue}%`;
                                    console.log("J/P ë°” ì„¤ì •:", jValue);
                                }
                            }, 200);
                        }, 200);
                    }, 200);
                }, 400);
            }
            
            // MBTI ìœ í˜•ë³„ ì„¤ëª… ë° ë³„ëª… ì—…ë°ì´íŠ¸
            const mbtiDescriptions = {
                "ISTJ": {
                    nickname: "ì²­ë ´ê²°ë°±í•œ ë…¼ë¦¬ì£¼ì˜ì (ISTJ)",
                    description: "ì²´ê³„ì ì´ê³  ì‚¬ì‹¤ì ì¸ ì„±ê²©ìœ¼ë¡œ, ì±…ì„ê°ì´ ê°•í•˜ê³  ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì…ë‹ˆë‹¤. ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ìœ¼ë¡œ ì¼ì„ ì²˜ë¦¬í•˜ë©°, ì„¸ë¶€ ì‚¬í•­ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì „í†µì ì¸ ê°€ì¹˜ë¥¼ ì¤‘ìš”ì‹œí•˜ë©° ì•½ì†ì„ ì§€í‚¤ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ìƒê°í•©ë‹ˆë‹¤."
                },
                "ISFJ": {
                    nickname: "ìš©ê°í•œ ìˆ˜í˜¸ì (ISFJ)",
                    description: "ë‹¤ì •í•˜ê³  ì±…ì„ê° ìˆëŠ” ì„±ê²©ìœ¼ë¡œ, ë‹¤ë¥¸ ì‚¬ëŒì˜ í•„ìš”ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤. ì„¸ë¶€ ì‚¬í•­ì— ì£¼ì˜ë¥¼ ê¸°ìš¸ì´ê³  ë‹¤ë¥¸ ì‚¬ëŒì„ ë°°ë ¤í•˜ë©° ë„ì›€ì„ ì£¼ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì „í†µê³¼ ì•ˆì •ì„±ì„ ì¤‘ìš”ì‹œí•˜ë©°, ì¡°ìš©í•˜ê³  ì§„ì‹¤ëœ ê´€ê³„ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤."
                },
                "INFJ": {
                    nickname: "ì„ ì˜ì˜ ì˜¹í˜¸ì (INFJ)",
                    description: "ì´ìƒì£¼ì˜ì ì´ê³  ì›ì¹™ì ì¸ ì„±ê²©ìœ¼ë¡œ, ë‹¤ë¥¸ ì‚¬ëŒê³¼ ì„¸ìƒì„ ë” ë‚˜ì€ ê³³ìœ¼ë¡œ ë§Œë“¤ê³ ì í•˜ëŠ” ê°•í•œ ì—´ë§ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. í†µì°°ë ¥ì´ ë›°ì–´ë‚˜ë©° ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ê³¼ ë™ê¸°ë¥¼ ì˜ ì´í•´í•©ë‹ˆë‹¤. ì§„ì‹¤ëœ ê´€ê³„ì™€ ì˜ë¯¸ ìˆëŠ” ì¼ì„ ì¶”êµ¬í•©ë‹ˆë‹¤."
                },
                "INTJ": {
                    nickname: "ìš©ì˜ì£¼ë„í•œ ì „ëµê°€ (INTJ)",
                    description: "ë…ë¦½ì ì´ê³  ë¶„ì„ì ì¸ ì„±ê²©ìœ¼ë¡œ, ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì§€ì  í˜¸ê¸°ì‹¬ì´ ë§ìœ¼ë©° ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ê°œë…ì„ íƒêµ¬í•˜ëŠ” ê²ƒì„ ì¦ê¹ë‹ˆë‹¤. ëª©í‘œ ì§€í–¥ì ì´ê³  ë¹„íŒì ì¸ ì‚¬ê³ ë¥¼ í†µí•´ íš¨ìœ¨ì ì¸ í•´ê²°ì±…ì„ ì°¾ì•„ëƒ…ë‹ˆë‹¤."
                },
                "ISTP": {
                    nickname: "ë§ŒëŠ¥ ì¬ì£¼ê¾¼ (ISTP)",
                    description: "ë…¼ë¦¬ì ì´ê³  ì‹¤ìš©ì ì¸ ì„±ê²©ìœ¼ë¡œ, ë¬¸ì œ í•´ê²°ì— ë›°ì–´ë‚œ ëŠ¥ë ¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ê¸°ê³„ì ì¸ ì‘ì—…ì´ë‚˜ ì†ìœ¼ë¡œ í•˜ëŠ” ì‘ì—…ì„ ì¦ê¸°ë©°, í˜„ì¬ì˜ ìƒí™©ì— ì§‘ì¤‘í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. ë…ë¦½ì ì´ê³  ììœ ë¥¼ ì¶”êµ¬í•˜ë©°, ìì‹ ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ì¼í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤."
                },
                "ISFP": {
                    nickname: "í˜¸ê¸°ì‹¬ ë§ì€ ì˜ˆìˆ ê°€ (ISFP)",
                    description: "ê°ì„±ì ì´ê³  ì˜ˆìˆ ì ì¸ ì„±ê²©ìœ¼ë¡œ, ì•„ë¦„ë‹¤ì›€ê³¼ ê°ê°ì ì¸ ê²½í—˜ì„ ì¤‘ìš”ì‹œí•©ë‹ˆë‹¤. ìì‹ ë§Œì˜ ê°€ì¹˜ê´€ì„ ê°€ì§€ê³  ìˆìœ¼ë©°, ì¡°ìš©í•˜ê³  ê²¸ì†í•œ íƒœë„ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. í˜„ì¬ì— ì§‘ì¤‘í•˜ë©° ìì—°ìŠ¤ëŸ½ê³  ììœ ë¡œìš´ ì‚¶ì„ ì¶”êµ¬í•©ë‹ˆë‹¤."
                },
                "INFP": {
                    nickname: "ì—´ì •ì ì¸ ì¤‘ì¬ì (INFP)",
                    description: "ì´ìƒì£¼ì˜ì ì´ê³  ì°½ì˜ì ì¸ ì„±ê²©ìœ¼ë¡œ, ìì‹ ì˜ ê°€ì¹˜ê´€ì— ë”°ë¼ ì‚´ì•„ê°‘ë‹ˆë‹¤. ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ë©°, ì¡°í™”ì™€ ì´í•´ë¥¼ ì¶”êµ¬í•©ë‹ˆë‹¤. ë‚´ë©´ì˜ ì„¸ê³„ê°€ í’ë¶€í•˜ê³  ìƒìƒë ¥ì´ í’ë¶€í•˜ë©°, ìì‹ ì˜ ë…íŠ¹í•œ ë°©ì‹ìœ¼ë¡œ ì„¸ìƒì— ê¸°ì—¬í•˜ê³ ì í•©ë‹ˆë‹¤."
                },
                "INTP": {
                    nickname: "ë…¼ë¦¬ì ì¸ ì‚¬ìƒ‰ê°€ (INTP)",
                    description: "ì§€ì  í˜¸ê¸°ì‹¬ì´ ë§ê³  ë¶„ì„ì ì¸ ì„±ê²©ìœ¼ë¡œ, ë³µì¡í•œ ì´ë¡ ê³¼ ì•„ì´ë””ì–´ë¥¼ íƒêµ¬í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ë…¼ë¦¬ì ìœ¼ë¡œ ì‚¬ê³ í•˜ë©° ë¬¸ì œì˜ ê·¼ë³¸ì ì¸ ì›ë¦¬ë¥¼ ì´í•´í•˜ê³ ì í•©ë‹ˆë‹¤. ë…ë¦½ì ì´ê³  ì°½ì˜ì ì¸ ì‚¬ê³ ë¥¼ í†µí•´ ìƒˆë¡œìš´ ì§€ì‹ì„ ì¶”êµ¬í•©ë‹ˆë‹¤."
                },
                "ESTP": {
                    nickname: "ëª¨í—˜ì„ ì¦ê¸°ëŠ” ì‚¬ì—…ê°€ (ESTP)",
                    description: "í™œë™ì ì´ê³  ì‹¤ìš©ì ì¸ ì„±ê²©ìœ¼ë¡œ, í˜„ì¬ì˜ ìƒí™©ì— ì§‘ì¤‘í•˜ê³  ì¦‰ê°ì ì¸ ê²°ê³¼ë¥¼ ì¶”êµ¬í•©ë‹ˆë‹¤. ìœ„í—˜ì„ ê°ìˆ˜í•˜ëŠ” ê²ƒì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šìœ¼ë©°, ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ì‚¬êµì ì´ê³  ì ì‘ë ¥ì´ ê°•í•˜ë©°, ìƒˆë¡œìš´ ê²½í—˜ì„ ì¦ê¹ë‹ˆë‹¤."
                },
                "ESFP": {
                    nickname: "ììœ ë¡œìš´ ì˜í˜¼ì˜ ì—°ì˜ˆì¸ (ESFP)",
                    description: "ì—´ì •ì ì´ê³  ì¦ê±°ì›€ì„ ì¶”êµ¬í•˜ëŠ” ì„±ê²©ìœ¼ë¡œ, ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. í˜„ì¬ì— ì§‘ì¤‘í•˜ë©° ê°ê°ì ì¸ ê²½í—˜ì„ ì¤‘ìš”ì‹œí•©ë‹ˆë‹¤. ì‚¬êµì ì´ê³  ë§¤ë ¥ì ì¸ ì„±ê²©ìœ¼ë¡œ, ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ê¸°ì¨ê³¼ í¥ë¯¸ë¥¼ ë¶ˆëŸ¬ì¼ìœ¼í‚µë‹ˆë‹¤."
                },
                "ENFP": {
                    nickname: "ì—´ì •ì ì¸ í™œë™ê°€ (ENFP)",
                    description: "ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ì„±ê²©ìœ¼ë¡œ, í•­ìƒ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì°¾ê³  ë‹¤ì–‘í•œ ì•„ì´ë””ì–´ë¥¼ ì‹œë„í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ìš”ì‹œí•˜ë©°, ë‹¤ë¥¸ ì‚¬ëŒì˜ ê°ì •ì„ ì˜ ì´í•´í•˜ê³  ê³µê°í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ììœ ë¡œìš´ ë¶„ìœ„ê¸°ì—ì„œ ì¼í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•˜ë©°, ê·œì¹™ì´ë‚˜ í‹€ì— ì–½ë§¤ì´ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
                },
                "ENTP": {
                    nickname: "ë…¼ìŸì„ ì¦ê¸°ëŠ” ë³€ë¡ ê°€ (ENTP)",
                    description: "ì§€ì  í˜¸ê¸°ì‹¬ì´ ë§ê³  ì°½ì˜ì ì¸ ì„±ê²©ìœ¼ë¡œ, ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ê°€ëŠ¥ì„±ì„ íƒêµ¬í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ë…¼ë¦¬ì ìœ¼ë¡œ ì‚¬ê³ í•˜ë©° ë‹¤ì–‘í•œ ê´€ì ì—ì„œ ë¬¸ì œë¥¼ ë°”ë¼ë³´ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë„ì „ì ì¸ í† ë¡ ì„ ì¦ê¸°ë©°, ê·œì¹™ì´ë‚˜ ê´€ìŠµì— ì–½ë§¤ì´ì§€ ì•Šê³  ììœ ë¡­ê²Œ ìƒê°í•©ë‹ˆë‹¤."
                },
                "ESTJ": {
                    nickname: "ì—„ê²©í•œ ê´€ë¦¬ì (ESTJ)",
                    description: "ì²´ê³„ì ì´ê³  ì‹¤ìš©ì ì¸ ì„±ê²©ìœ¼ë¡œ, ì±…ì„ê°ì´ ê°•í•˜ê³  ê²°ê³¼ ì§€í–¥ì ì…ë‹ˆë‹¤. ë…¼ë¦¬ì ìœ¼ë¡œ ì‚¬ê³ í•˜ë©° íš¨ìœ¨ì ì¸ ë°©ì‹ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê³ ì í•©ë‹ˆë‹¤. ì „í†µê³¼ ì§ˆì„œë¥¼ ì¤‘ìš”ì‹œí•˜ë©°, ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ ì¡°ì§ì„ ì´ë„ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤."
                },
                "ESFJ": {
                    nickname: "ì‚¬êµì ì¸ ì™¸êµê´€ (ESFJ)",
                    description: "ë‹¤ì •í•˜ê³  ë°°ë ¤ì‹¬ì´ ë§ì€ ì„±ê²©ìœ¼ë¡œ, ë‹¤ë¥¸ ì‚¬ëŒì˜ í•„ìš”ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•©ë‹ˆë‹¤. ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ë¥¼ ì¤‘ìš”ì‹œí•˜ë©°, ì¡°í™”ë¡œìš´ í™˜ê²½ì„ ë§Œë“¤ê³ ì í•©ë‹ˆë‹¤. ì±…ì„ê°ì´ ê°•í•˜ê³  í˜‘ë ¥ì ì´ë©°, ë‹¤ë¥¸ ì‚¬ëŒì„ ë„ìš°ë©° ê¸°ì¨ì„ ëŠë‚ë‹ˆë‹¤."
                },
                "ENFJ": {
                    nickname: "ì •ì˜ë¡œìš´ ì‚¬íšŒìš´ë™ê°€ (ENFJ)",
                    description: "ë”°ëœ»í•˜ê³  ì´íƒ€ì ì¸ ì„±ê²©ìœ¼ë¡œ, ë‹¤ë¥¸ ì‚¬ëŒì˜ ì ì¬ë ¥ì„ ëŒì–´ë‚´ê³  ì„±ì¥ì„ ë•ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤. ê°ì •ì ìœ¼ë¡œ ê³µê°í•˜ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©°, ì¡°í™”ì™€ í˜‘ë ¥ì„ ì¤‘ìš”ì‹œí•©ë‹ˆë‹¤. ì¹´ë¦¬ìŠ¤ë§ˆ ìˆëŠ” ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ ê¸ì •ì ì¸ ë³€í™”ë¥¼ ì´ëŒì–´ë‚´ê³ ì í•©ë‹ˆë‹¤."
                },
                "ENTJ": {
                    nickname: "ëŒ€ë‹´í•œ í†µì†”ì (ENTJ)",
                    description: "ìì‹ ê° ìˆê³  ê²°ë‹¨ë ¥ ìˆëŠ” ì„±ê²©ìœ¼ë¡œ, ì¥ê¸°ì ì¸ ë¹„ì „ê³¼ ëª©í‘œë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ë…¼ë¦¬ì ìœ¼ë¡œ ì‚¬ê³ í•˜ë©° íš¨ìœ¨ì ì¸ ì „ëµì„ ì„¸ìš°ëŠ” ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤. ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ ì¡°ì§ì„ ì´ëŒê³ , ë„ì „ì ì¸ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ ë…¸ë ¥í•©ë‹ˆë‹¤."
                }
            };
            
            const mbtiInfo = mbtiDescriptions[mbtiType] || mbtiDescriptions["ENFP"];
            
            // ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì§€ì—°
            setTimeout(() => {
                document.getElementById('mbti-nickname').textContent = mbtiInfo.nickname;
                document.getElementById('mbti-description').textContent = mbtiInfo.description;
                
                // ê²°ê³¼ ì„¤ëª…ì— í˜ì´ë“œì¸ íš¨ê³¼ ì¶”ê°€
                const descriptionElement = document.querySelector('.result-description');
                descriptionElement.style.opacity = '0';
                descriptionElement.style.transform = 'translateY(10px)';
                descriptionElement.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                
                setTimeout(() => {
                    descriptionElement.style.opacity = '1';
                    descriptionElement.style.transform = 'translateY(0)';
                }, 100);
                
                // ê³µìœ  í…ìŠ¤íŠ¸ ìƒì„±
                createShareText(mbtiType, mbtiInfo, result.percentages);
            }, 1200);
        }
        
        // ê³µìœ ìš© í…ìŠ¤íŠ¸ ìƒì„± í•¨ìˆ˜
        function createShareText(mbtiType, mbtiInfo, percentages) {
            shareText = `[MBTI í…ŒìŠ¤íŠ¸ ê²°ê³¼]\n\n`;
            shareText += `ğŸ† ë‚˜ì˜ MBTI: ${mbtiType}\n`;
            shareText += `âœ¨ ${mbtiInfo.nickname}\n\n`;
            
            if (percentages) {
                shareText += `ğŸ” ì„±í–¥ ë¶„ì„:\n`;
                shareText += `${percentages.EI}\n`;
                shareText += `${percentages.SN}\n`;
                shareText += `${percentages.TF}\n`;
                shareText += `${percentages.JP}\n\n`;
            }
            
            shareText += `ğŸ’¬ ${mbtiInfo.description.substring(0, 100)}...\n\n`;
            shareText += `âœ… Zep MBTI í…ŒìŠ¤íŠ¸ì—ì„œ í™•ì¸í•˜ì„¸ìš”!`;
            shareText += `âœ… https://zep.us/play/5rXrlv!`;
            
            // ê³µìœ  í…ìŠ¤íŠ¸ë¥¼ í…ìŠ¤íŠ¸ ì˜ì—­ì— ì„¤ì •
            document.getElementById('share-text-area').value = shareText;
        }
        
        // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.getElementById('close-result').addEventListener('click', function() {
            // ë‹«ê¸° ì• ë‹ˆë©”ì´ì…˜
            const container = document.querySelector('.result-container');
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';
            
            // ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ ì•±ì— ë©”ì‹œì§€ ì „ì†¡
            setTimeout(() => {
                sendMessageToApp({
                    type: "CLOSE_RESULT"
                });
            }, 300);
        });
        
        document.getElementById('retry-test').addEventListener('click', function() {
            // ë‹«ê¸° ì• ë‹ˆë©”ì´ì…˜
            const container = document.querySelector('.result-container');
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';
            
            // ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ ì•±ì— ë©”ì‹œì§€ ì „ì†¡
            setTimeout(() => {
                sendMessageToApp({
                    type: "RETRY_MBTI_TEST"
                });
            }, 300);
        });
        
        // MBTI ë¼ìš´ì§€ë¡œ ì´ë™ ë²„íŠ¼
        document.getElementById('go-to-lounge').addEventListener('click', function() {
            // ë‹«ê¸° ì• ë‹ˆë©”ì´ì…˜
            const container = document.querySelector('.result-container');
            container.style.opacity = '0';
            container.style.transform = 'translateY(20px)';
            
            // ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ ì•±ì— ë©”ì‹œì§€ ì „ì†¡
            setTimeout(() => {
                sendMessageToApp({
                    type: "GO_TO_MBTI_LOUNGE"
                });
            }, 300);
        });
        
        // ê²°ê³¼ ë³µì‚¬ ë²„íŠ¼
        document.getElementById('copy-result').addEventListener('click', function() {
            // TextArea í‘œì‹œ ë° ë‚´ìš© ì„¤ì • (ëª¨ë“  ê²½ìš°ì—)
            const textContainer = document.querySelector('.share-text-container');
            const textArea = document.getElementById('share-text-area');
            textContainer.style.display = 'block';
            textArea.value = shareText;
            
            try {
                // í´ë¦½ë³´ë“œì— ì§ì ‘ ë³µì‚¬ (í˜„ëŒ€ì ì¸ ë°©ì‹)
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(shareText)
                        .then(() => {
                            const copySuccess = document.getElementById('copy-success');
                            copySuccess.style.display = 'block';
                            
                            // ì„±ê³µ ë©”ì‹œì§€ëŠ” 2ì´ˆ í›„ ìˆ¨ê¹€
                            setTimeout(() => {
                                copySuccess.style.display = 'none';
                            }, 2000);
                        })
                        .catch(err => {
                            console.error('í´ë¦½ë³´ë“œ API ì‚¬ìš© ì‹¤íŒ¨:', err);
                            fallbackCopy();
                        });
                } else {
                    fallbackCopy();
                }
            } catch (err) {
                console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                alert('í´ë¦½ë³´ë“œ ë³µì‚¬ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì„ íƒí•˜ì—¬ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
            }
        });
        
        // ëŒ€ì²´ ë³µì‚¬ ë°©ë²• (ì´ì „ ë°©ì‹)
        function fallbackCopy() {
            const textArea = document.getElementById('share-text-area');
            
            try {
                textArea.focus();
                textArea.select();
                const successful = document.execCommand('copy');
                
                if (successful) {
                    const copySuccess = document.getElementById('copy-success');
                    copySuccess.style.display = 'block';
                    
                    setTimeout(() => {
                        copySuccess.style.display = 'none';
                    }, 2000);
                } else {
                    throw new Error('ë³µì‚¬ ì‹¤íŒ¨');
                }
            } catch (err) {
                console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                alert('í´ë¦½ë³´ë“œ ë³µì‚¬ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤. í…ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ì„ íƒí•˜ì—¬ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
            }
        }
        
        // Zep ëŒ€í™”ì°½ì— ê³µìœ í•˜ê¸° ë²„íŠ¼
        document.getElementById('share-with-zep').addEventListener('click', function() {
            // í…ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ í‘œì‹œ
            const textContainer = document.querySelector('.share-text-container');
            const textArea = document.getElementById('share-text-area');
            textContainer.style.display = 'block';
            textArea.value = shareText;
            
            // ì•±ìœ¼ë¡œ ê³µìœ  ë©”ì‹œì§€ ì „ì†¡
            sendMessageToApp({
                type: "SHARE_TO_ZEP_CHAT",
                content: shareText
            });
            
            const copySuccess = document.getElementById('copy-success');
            copySuccess.textContent = "âœ“ Zep ì±„íŒ…ì— ê³µìœ ë˜ì—ˆìŠµë‹ˆë‹¤";
            copySuccess.style.display = 'block';
            
            setTimeout(() => {
                copySuccess.style.display = 'none';
                copySuccess.textContent = "âœ“ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤";
            }, 2000);
        });
        
        // ì•±ìœ¼ë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” í•¨ìˆ˜
        function sendMessageToApp(data) {
            window.parent.postMessage(data, "*");
        }
    </script>
</body>
</html> 